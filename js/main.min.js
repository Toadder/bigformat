function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function _removeClass(e,t){for(let o of e)o.classList.remove(t)}function _addClass(e,t){for(let o of e)o.classList.add(t)}function ymap(){let e=document.querySelector(".map");function t(){if("undefined"==typeof ymaps)return;document.getElementById("ymap");ymaps.ready(function(){let e=new ymaps.Map("ymap",{center:[55.9823072874419,92.89464922321378],zoom:16,controls:["zoomControl"],behaviors:["drag"]}),t=new ymaps.Placemark([55.98332756875584,92.89800849999992],{hintContent:"BIGFORMAT"},{iconLayout:"default#image",iconImageHref:"img/marker.svg",iconImageSize:[75,92],iconImageOffset:[-40,-95]});function o(){window.innerWidth<"767"?e.setCenter([55.98365058108414,92.89771761825823]):window.innerWidth<"992"?e.setCenter([55.9836064830893,92.89366217029631]):e.setCenter([55.9823072874419,92.89464922321378])}o(),e.geoObjects.add(t),window.onresize=function(){o()}})}function o(){let i=e.getBoundingClientRect().top,n=window.pageYOffset,r=i+n;n+window.innerHeight>r&&(!function(){let e=document.createElement("script");e.src="https://api-maps.yandex.ru/2.1/?lang=ru_RU",document.body.appendChild(e),e.onload=t}(),window.removeEventListener("scroll",o))}window.addEventListener("scroll",o),o()}testWebP(function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")});var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function formAddError(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}function formRemoveError(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error")}function emailTest(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)}function popup(){const e=document.querySelectorAll(".popup-link"),t=document.querySelector("body"),o=document.querySelectorAll(".lock-padding");let i=!0;const n=800;if(e.length>0)for(let t=0;t<e.length;t++){const o=e[t];o.addEventListener("click",function(e){const t=o.getAttribute("href").replace("#","");s(document.getElementById(t)),e.preventDefault()})}const r=document.querySelectorAll(".close-popup");if(r.length>0)for(let e=0;e<r.length;e++){const t=r[e];t.addEventListener("click",function(e){a(t.closest(".popup")),e.preventDefault()})}function s(e){if(e&&i){const r=document.querySelector(".popup._open");r?a(r,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(o.length>0)for(let t=0;t<o.length;t++){const i=o[t];i.style.paddingRight=e}t.style.paddingRight=e,t.classList.add("_lock"),i=!1,setTimeout(function(){i=!0},n)}(),e.classList.add("_open"),e.addEventListener("click",function(e){e.target.closest(".popup__content")||a(e.target.closest(".popup"))})}}function a(e,r=!0){i&&(e.classList.remove("_open"),r&&(setTimeout(function(){if(o.length>0)for(let e=0;e<o.length;e++){const t=o[e];t.style.paddingRight="0px"}t.style.paddingRight="0px",t.classList.remove("_lock")},n),i=!1,setTimeout(function(){i=!0},n)))}document.addEventListener("keydown",function(e){if(27===e.which){a(document.querySelector(".popup._open"))}})}function phoneMask(){let e=document.querySelectorAll("input[data-tel-input]");for(let t of e)t.addEventListener("keydown",n),t.addEventListener("input",i,!1),t.addEventListener("paste",o,!1);function t(e){return e.value.replace(/\D/g,"")}function o(e){let o=e.target,i=t(o),n=e.clipboardData||window.clipboardData;if(n){let e=n.getData("Text");if(/\D/g.test(e))return void(o.value=i)}}function i(e){let o=e.target,i=t(o),n=o.selectionStart,r="";if(!i)return o.value="";if(o.value.length==n){if(["7","8","9"].indexOf(i[0])>-1){"9"==i[0]&&(i="7"+i);let e="8"==i[0]?"8":"+7";r=o.value=e+" ",i.length>1&&(r+="("+i.substring(1,4)),i.length>=5&&(r+=") "+i.substring(4,7)),i.length>=8&&(r+="-"+i.substring(7,9)),i.length>=10&&(r+="-"+i.substring(9,11))}else r="+"+i.substring(0,16);o.value=r}else e.data&&/\D/g.test(e.data)&&(o.value=i)}function n(e){let t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")}}jQuery(document).ready(function(e){if(phoneMask(),ymap(),popup(),window.matchMedia("(max-width: 800px)").matches){const t=e(".about__bullets");e(".about__block").append(t),e(".about__content").remove(t)}!function(){function t(){var o=e(".step").offset().top,i=e(window).scrollTop()+1.5*e(".step").css("padding-top").replace("px","")+e(".header").outerHeight();console.log(),o<i&&o+e(".step").outerHeight()>i&&(!function(){let t=document.querySelectorAll(".item-step"),o=0,i=setInterval(()=>{if(o>=t.length)clearInterval(i),setTimeout(()=>{e(".step__title").text(e(".step__title").data("text"))},1500);else{let i=t[o],n=+i.querySelector(".item-step__number").innerHTML,r=i.querySelector(".item-step__text").innerHTML;i.querySelector(".item-step__number").classList.add("_hovered"),e(".step__number span").text(n),e(".step__title").text(r),o++}},1500)}(),window.removeEventListener("scroll",t))}isMobile.any()?(window.addEventListener("scroll",t),t()):(e(".item-step__number").mouseenter(function(t){if(!e(this).hasClass("_hovered")){const t=+e(this).text(),o=e(this).next().text(),i=e(this).parent().index()+1;e(".item-step").slice(0,i).find(".item-step__number").addClass("_hovered"),e(".step__number span").text(t),e(".step__title").text(o)}}),e(".item-step__number").mouseleave(function(t){e(".item-step__number").removeClass("_hovered"),e(".step__number span").text(document.querySelectorAll(".item-step").length),e(".step__title").text(e(".step__title").data("text"))}))}(),e("._card-popup").click(function(t){const o=e(this).find("._card-popup__title").text(),i=e(this).find("._card-popup__text").html(),n=e(this).find("._card-popup__img img").attr("src").split(".");e(".popup-info__title").text(o),e(".popup-info__text").html(i),e(".popup-info__img source").attr("srcset",`${n[0]}-big.webp`),e(".popup-info__img img").attr("src",`${n[0]}-big.${n[1]}`),e(".popup-info__close").click(function(){const t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";setTimeout(()=>{e(".popup-info__img img").attr("src",t),e(".popup-info__img source").attr("srcset",t)},1e3)})}),function(){const e=document.querySelectorAll("form");for(var t=0;t<e.length;t++)form=e[t],form.addEventListener("submit",o);async function o(e){e.preventDefault();!function(e){let t=0,o=e.querySelectorAll("._req");for(var i=0;i<o.length;i++){const e=o[i];formRemoveError(e),e.classList.contains("_email")?emailTest(e)||(formAddError(e),t++):"checkbox"==e.getAttribute("type")&&!1===e.checked?(formAddError(e),t++):""==e.value&&(formAddError(e),t++)}}(e.currentTarget)}}(),function(){let t=e(window).width()<=767?8:e(window).width()<=1200?9:10;e(".card-suggest").slice(0,t).css("display","flex");let o=!0;e(".suggest__btn").click(function(i){i.preventDefault(),o?(e(".card-suggest:hidden").slice(0).fadeIn().css("display","flex"),e(this).html("Свернуть"),o=!1):(e(".card-suggest").slice(t).fadeOut().css("display","flex"),e(this).html("Показать все"),o=!0)})}(),e(".card-suggest").click(function(t){let o=e(this).children(".card-suggest__title").text().toLowerCase();e(".special__sale").text(e(".special__sale").data("text")+o)}),new Swiper(".card-service__slider._design",{allowTouchMove:!0,speed:800,loop:!0,effect:"fade",fadeEffect:{crossFade:!0},preloadImages:!1,lazy:{loadPrevNext:!1},observer:!0,observeParents:!0,observer:!0,observeSlideChildren:!0,navigation:{nextEl:".card-service__next_design",prevEl:".card-service__prev_design"}}),new Swiper(".card-service__slider._montage",{allowTouchMove:!0,speed:800,loop:!0,effect:"fade",observer:!0,observeParents:!0,observer:!0,fadeEffect:{crossFade:!0},preloadImages:!1,lazy:{loadPrevNext:!1},observeSlideChildren:!0,navigation:{nextEl:".card-service__next._montage",prevEl:".card-service__prev._montage"}}),new Swiper(".card-service__slider._production",{allowTouchMove:!0,speed:800,loop:!0,effect:"fade",observer:!0,observeParents:!0,observer:!0,fadeEffect:{crossFade:!0},preloadImages:!1,lazy:{loadPrevNext:!1},observeSlideChildren:!0,navigation:{nextEl:".card-service__next._production",prevEl:".card-service__prev._production"}}),new Swiper(".about__slider",{allowTouchMove:!0,loopPreventsSlide:!0,slidesPerView:1,speed:800,loop:!0,autoplay:!0,delay:3650,effect:"fade",preloadImages:!1,lazy:{loadPrevNext:!1},fadeEffect:{crossFade:!0},autoHeight:!0,pagination:{el:".about__bullets",type:"bullets",clickable:!0}}),new Swiper(".slider-letter",{slidesPerView:3,allowTouchMove:!1,speed:600,centeredSlides:!0,loop:!0,preventClicks:!1,preventClicksPropagation:!1,preloadImages:!1,lazy:{loadPrevNext:!1},effect:"coverflow",coverflowEffect:{rotate:0,stretch:100,depth:200,modifier:3,slideShadows:!1},navigation:{nextEl:".letter__next",prevEl:".letter__prev"},pagination:{el:".letter__bullets",type:"bullets",clickable:!0},breakpoints:{320:{slidesPerView:1,centeredSlides:!1,effect:"slide",spaceBetween:10},768:{slidesPerView:3,centeredSlides:!0,effect:"coverflow",coverflowEffect:{rotate:0,stretch:100,depth:200,modifier:3,slideShadows:!1}}}}),e(".service__tab").click(function(){e(".card-service").removeClass("_active"),e(".service__tab").removeClass("_active"),e(this).addClass("_active"),e(".card-service").eq(e(this).index()).addClass("_active")}),e(".bottom-header__burger").click(function(t){e(".mobile-header").addClass("_active"),e("body").addClass("_lock")}),e(".mobile-header__close svg").click(function(t){e(".mobile-header").removeClass("_active"),e("body").removeClass("_lock")}),e(".top-header__city").click(function(t){e(".top-header__city").next(".top-header__cities").toggleClass("_active")}),document.body.addEventListener("click",function(t){e(t.target).closest(".top-header__location").length||e(".top-header__cities").removeClass("_active")}),e(".top-header__cities-item").click(function(t){const o=e(this).text();e(".top-header__cities-item").removeClass("_active"),e(this).addClass("_active"),e(".top-header__city .top-header__city-name").text(o),e()}),document.querySelectorAll("a._anchor-scroll").length&&e("a._anchor-scroll").on("click",function(t){t.preventDefault();let o=e(this).attr("href");if(e(".mobile-header").removeClass("_active"),e("body").removeClass("_lock"),e(this).data("tab")){let t=e(this).data("tab");e(".service__tab").removeClass("_active"),e(`.service__tab.${t}`).addClass("_active"),e(".service__card").removeClass("_active"),e(".service__card").eq(e(`.service__tab.${t}`).index()).addClass("_active")}e("html, body").stop().animate({scrollTop:e(o).offset().top-e(".header").outerHeight()},1e3)})});
